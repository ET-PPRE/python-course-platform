# ğŸ Python Course Platform

A Django-based self-learning platform with integrated autograding for Python assignments. This platform leverages Django, containerization with Docker, and automated grading to streamline which can be used in numorous contexts.

---

## ğŸš€ Features

- âœ… User accounts and assignment submissions
- âœ… Asynchronous autograding using Celery + Redis
- âœ… PostgreSQL database
- âœ… Support for separate course content repository
- âœ… GitLab CI/CD

---

## ğŸ—ï¸ Repository Structure

```

python-course-platform/
â”œâ”€â”€ .dockerignore
â”œâ”€â”€ .env.local                  # Environment variables for local server
â”œâ”€â”€ .env.dev                    # Environment variables for development server
â”œâ”€â”€ .env.prod                   # Environment variables for production server
â”œâ”€â”€ .gitignore
â”œâ”€â”€ .gitlab-ci.yml              # pipeline to automate deployment
â”œâ”€â”€ docker-compose.main.yml     # Docker containers for the production version of the site
â”œâ”€â”€ docker-compose.yml          # Docker containers for the development version of the site
â”œâ”€â”€ Dockerfile                  # Docker instructions
â”œâ”€â”€ sandbox-requirements.txt    # The script submitted by users will only use these dependencies
â”œâ”€â”€ pyproject.toml              # Project metadata and dependency config (Ruff, Django, etc.)
â”œâ”€â”€ README.md                   # Project overview and setup instructions
â”œâ”€â”€ start-django.sh             # Shell script to run in development server
â”œâ”€â”€ tailwind.config.js          # Tailwind config file
â”œâ”€â”€ uv.lock                     # Locked dependencies for reproducible builds (generated by `uv`)
â”œâ”€â”€ src/                        # The source code root - All source code lives here 
â”‚   â”œâ”€â”€ manage.py               # Management script
â”‚   â”œâ”€â”€ project/                # Main Django project configuration
â”‚   â”‚   â”œâ”€â”€ settings 
â”‚   â”‚   â”‚   â”œâ”€â”€ base.py
â”‚   â”‚   â”‚   â”œâ”€â”€ dev.py
â”‚   â”‚   â”‚   â”œâ”€â”€ prod.py
â”‚   â”‚   â”‚   â”œâ”€â”€ celery_settings.py
â”‚   â”‚   â”œâ”€â”€ celery.py 
â”‚   â”‚   â””â”€â”€ ...
â”‚   â””â”€â”€ users/                  # Custom user model, registration, and login views
â”‚       â”œâ”€â”€ models.py
â”‚       â”œâ”€â”€ views.py
â”‚       â”œâ”€â”€ urls.py
â”‚       â”œâ”€â”€ apps.py
â”‚       â””â”€â”€ ...
â”œâ”€â”€ static/                     # Static files
â”‚   â”œâ”€â”€ css/                    # Stylesheets
â”‚   â”‚   â””â”€â”€ output.css          # Compiled CSS output (auto-generated by Tailwind CSS)
â”œâ”€â”€ tailwindcss/
â”‚   â””â”€â”€ input.css               # Input file for Tailwind CSS
â”‚   â””â”€â”€ output.css               
â””â”€â”€ templates/                  # HTML templates (base.html, registration, etc.)
    â”œâ”€â”€ base.html               # Template for base layout
    â”œâ”€â”€ home.html               # Template for Homepage
    â”œâ”€â”€ account/                # Templates for user authentication (Django Allauth)
    â”‚   â”œâ”€â”€ login.html
    â”‚   â”œâ”€â”€ signup.html
    â”‚   â””â”€â”€ ...
    â””â”€â”€ assignments/            # Templates for assignments
        â””â”€â”€ ...
````

---

## ğŸ“¦ Content Repository

All the platform learning content, assignment descriptions, starter code, solutions, and test scripts are live in a **separate Git repository**. This ensures that the platform code remains universal and can be implemented for different courses. 

The learning material its structure is available in this **[Git repository](https://github.com/ET-PPRE/python-for-data-analysis)**.

---

## ğŸš€ Demo

Below you can find a demonstation of a Python course for beginners developed using this platform.

![Demo](demo.gif)

---

## ğŸ§ª Developers Notes

**Setting Up **python-course-platform** with Docker**

The following documentation explains how developers can clone the repository, configure the environment, run the Django website using Docker, and create a superuser inside the web container.

---

### 1. Installations

### 1.1 Git

Install **Git** if not already installed.
Once done, Navigate to a directory where you want to clone the project, then clone the project using the following command.

```bash
git clone <url>
cd python-course-platform
```

#### 1.2 uv astral

Install **uv** if not already installed. 
You have to run `uv lock` whenever you modified the `pyproject.toml` file. This will update the lock file.

#### 1.3 Docker

The platform is run using Docker, **Docker Desktop** therefore it has to be installed, which can be done according to the steps below.

##### **On Windows**

1. **Download Docker Desktop**  
   Visit [https://www.docker.com/products/docker-desktop/](https://www.docker.com/products/docker-desktop/)  
   Click **Download for Windows**, and save the installer.

2. **Run the Installer**  
   Open the `.exe` file and follow the installation instructions.
   
3. **Enable WSL2 Backend (Recommended)**  
   Docker Desktop supports two backends: Hyper-V and WSL2.  
   - If you want to use WSL2 (recommended for Windows 10/11), see the WSL section below for instructions.
   - During installation, Docker may prompt you to enable the WSL2 backend; allow it.

4. **Verify Installation**  
   Once installed, open Docker Desktop.  
   Open a terminal (Command Prompt or PowerShell) and type:
   ```
   docker --version
   docker compose version
   ```
   You should see versions for both Docker and Docker Compose.


##### **On macOS**

1. **Download Docker Desktop**  
   Visit [https://www.docker.com/products/docker-desktop/](https://www.docker.com/products/docker-desktop/)  
   Click **Download for Mac**, and save the `.dmg` file.

2. **Install and Run**  
   Open the `.dmg` file, drag Docker to Applications, and open Docker Desktop.

3. **Verify Installation**  
   Open Terminal and run:
   ```
   docker --version
   docker compose version
   ```


##### **On Linux**

Docker Desktop is generally for Windows/macOS. On Linux, Docker is installed directly.

### Installing WSL2 (Windows Subsystem for Linux)

If you are using Windows, this is an optional but strongly recommended step. For the integration of Docker, a Unix-like shell (macOS, Linux, Git Bash or WSL2 on Windows) ensures smoother operation.

**Note:** When you installed Docker Desktop, you get asked to select the WSL2 backend (which is recommended). If you did not do this you can follow the WSL2 installation steps below.

1. **Open PowerShell as Administrator**  

2. **Install WSL**  
   Paste and run this command:
   ```
   wsl --install
   ```
   This installs WSL2 and Ubuntu by default.

3. **Verify Installation**
  Run this command:
   ```
   wsl --version
   ```

4. **Open WSL Terminal**  
   Search for "WSL" in Start Menu to open the WSL2 terminal.


### 2. Start website in local server

Once you have cloned the repo and installed Docker, on the project directory, execute docker build command shown below to create containers and images.

```bash
docker compose build
```

This will build all the services.

* **web** â†’ Django
* **redis** â†’ Redis broker
* **celery** â†’ Worker
* **celery-beat** â†’ Scheduled tasks

Now to run the services,

```bash
docker compose up web redis celery celery-beat
```

Alternatively, to run the services in background:

```bash
docker compose up -d web redis celery celery-beat
```

When everything is running, the site is available at:

```bash
http://localhost:8000
```

To end the running services

```bash
docker compose down
```

---

### 3. To Apply Database Migrations

To apply migrations, make sure you are running the docker in another terminal or in detached mode as mentioned in the previous point.

Inside the web container:

```bash
docker exec -it python-course-platform-web-1 bash
```
Now you are taken to the root.

```bash
root@container:/app# cd src
root@container:/app/src# uv run manage.py makemigrations
Bytecode compiled 5831 files in 284ms
No changes detected
root@container:/app/src# uv run manage.py migrate
Bytecode compiled 5831 files in 459ms
Operations to perform:
  Apply all migrations: account, admin, assignments, auth, contenttypes, grader, sessions, site_data, users
Running migrations:
  No migrations to apply.
```

---

### 4. Create Admin (Superuser)

You have to run docker in detached mode or in a another terminal.

Enter the Django web container:

```bash
docker exec -it python-course-platform-web-1 bash
```

Then inside the container:


```bash
root@fee377317a5f:/app# cd src
root@fee377317a5f:/app/src# uv run manage.py createsuperuser
```

Follow the prompts to set username, email, and password.

Exit the container:

```bash
exit
```

Now log in at:

```
http://localhost:8000/admin
```

